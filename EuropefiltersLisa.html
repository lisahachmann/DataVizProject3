<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Social Media Data Charts</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    </head>
<body>
<div class = "btn-group" role = "group">
<button type = "button" class ="btn btn-default" id="Britain">Britain</button>
      <button type="button" class="btn btn-default" id="France">France</button>
      <button type="button" class="btn btn-default" id="Germany">Germany</button>
      <button type="button" class="btn btn-default" id="Italy">Italy</button>
      <button type="button" class="btn btn-default" id="Spain">Spain</button>
      <button type="button" class="btn btn-default" id="Greece">Greece</button>
      <button type="button" class="btn btn-default" id="Poland">Poland</button>
      <button type="button" class="btn btn-default" id="Czech Republic">Czech Republic</button>
    </div>

<script type="text/javascript">
    var GLOBAL = {data: [], big_countries:["Britain", "France", "Germany", "Italy", "Spain", "Greece, Poland", "Czech Republic"]}
    function computeSizes (svg) {
    // get the size of the SVG element
    var height = svg.attr("height");
    var width = svg.attr("width");
    var margin = 10;
    // the chart lives in the svg surrounded by a margin of 100px
    return {height:height,
	    width: width,
	    margin: margin,
	    chartHeight: height-2*margin,
	    chartWidth: width-2*margin}
}
        window.addEventListener("load", run);

        function run () {

        d3.csv("EuropeanUnionfeelings.csv", function(data) {
        GLOBAL.data = data;
        });

        d3.selectAll("button").on("click", function(){
        var j = countbyColumn(this.id);
        console.log(j)});
        }

function countbyColumn(country, observation){
    var counts = {};
     GLOBAL.data.forEach(function(r) {
         if (r["COUNTRY"] == country){
            if (r["COUNTRY"] in counts){
                counts[r["COUNTRY"]] +=1;
            }
            else{
                counts[r["COUNTRY"]] = 1;
            }
        }
    })
    var countMaxTrust= {};
    counts.forEach(function(r){
        if r["maxTrust"]
    })
return counts;
}


</script>
</body>
</html>
